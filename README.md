# ç•²æ—æœé¥°å›¾åƒæ ‡å®šå·¥å…· (She Ethnic Costume Annotator)

> æ›´æ–°æ—¶é—´ï¼š2024-06-03

æœ¬å·¥å…·ç”¨äºå¯¹ç•²æ—æœé¥°å›¾åƒè¿›è¡Œæ ‡å®šï¼Œæ”¯æŒé€šè¿‡ç‚¹å‡»ã€åˆ†å‰²ä¸æ©ç ç»˜åˆ¶æ–¹å¼è¿›è¡ŒåŒºåŸŸä¸»è‰²æå–ä¸ä¿å­˜ï¼Œæœ€ç»ˆè¾“å‡º RLE å‹ç¼©çš„ JSON æ ‡æ³¨ä¿¡æ¯ï¼Œä¾¿äºåç»­çš„å›¾åƒåˆ†æä¸ä¸»è‰²ç»Ÿè®¡å·¥ä½œã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½             | æè¿°                                          |
| ---------------- | --------------------------------------------- |
| âœ… æ‰“å¼€å›¾ç‰‡      | æ”¯æŒ `.jpg`, `.png`, `.bmp` ç­‰å›¾åƒæ ¼å¼åŠ è½½    |
| âœ… ç¼©æ”¾æ‹–åŠ¨      | é¼ æ ‡æ»šè½®ç¼©æ”¾ã€é¼ æ ‡æ‹–åŠ¨ç§»åŠ¨å›¾åƒ                |
| âœ… AI åˆ†å‰²       | é€šè¿‡æ·»åŠ å‰æ™¯ç‚¹å’ŒèƒŒæ™¯ç‚¹è§¦å‘æ™ºèƒ½åˆ†å‰²            |
| âœ… æ‰‹åŠ¨ä¿®æ”¹      | æ”¯æŒæ‰‹åŠ¨å¢åŠ æˆ–æ“¦é™¤æ©ç åŒºåŸŸè¿›è¡Œç²¾ç»†è°ƒæ•´        |
| âœ… æ©ç æ˜¾ç¤ºåˆ‡æ¢  | å¯é€šè¿‡å³ä¾§ âœ”/âœ– æ§åˆ¶å„æ©ç æ˜¾ç¤ºçŠ¶æ€             |
| âœ… ä¸»è‰² RGB ç¼–è¾‘ | å³ä¾§è¡¨æ ¼å¯ç¼–è¾‘ R/G/B æ•°å€¼ï¼Œå¹¶å®æ—¶æ›´æ–°æ˜¾ç¤ºé¢œè‰² |
| âœ… æ’¤é”€ä¸é‡åš    | Ctrl+Z æ’¤é”€ã€Ctrl+Y é‡åšæ©ç æ“ä½œ              |
| âœ… æ ‡å®šä¿å­˜      | ç”Ÿæˆå‹ç¼©åçš„ JSON æ–‡ä»¶ï¼Œè®°å½•ä¸»è‰²ä¸æ©ç         |
| âœ… è‡ªåŠ¨åŠ è½½      | å†æ¬¡æ‰“å¼€å›¾ç‰‡æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¯¹åº”çš„æ ‡å®šè®°å½•        |

---

## ğŸ“¦ å®‰è£…ä¾èµ–

æ¨èä½¿ç”¨ Conda åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š

```bash
conda create -n shezu python=3.12
conda activate shezu
pip install -r requirements.txt
```

---

## ğŸš€ å¯åŠ¨æ–¹å¼

```bash
python src/color_annotator/main.py
```

---

## ğŸ—‚ é¡¹ç›®ç»“æ„

```
project_root/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ color_annotator/
â”‚       â”œâ”€â”€ gui/
â”‚       â”‚   â”œâ”€â”€ main_window.py
â”‚       â”‚   â”œâ”€â”€ image_viewer.py
â”‚       â”‚   â”œâ”€â”€ ai_segmentation.py
â”‚       â”œâ”€â”€ sam_interface/
â”‚       â”‚   â”œâ”€â”€ sam_segmentor.py
â”‚       â”œâ”€â”€ utils/
â”‚       â”‚   â”œâ”€â”€ sam_thread.py
â”‚       â”œâ”€â”€ training/              â† æ¨¡å‹è®­ç»ƒç›¸å…³ä»£ç 
â”‚       â”œâ”€â”€ advanced_training/     â† é«˜çº§è®­ç»ƒæ–¹æ³•
â”‚       â”œâ”€â”€ tools/                 â† å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ main.py                â† ä¸»ç¨‹åºå…¥å£
â”‚       â””â”€â”€ setup_models.py        â† æ¨¡å‹åˆå§‹åŒ–é…ç½®
â”œâ”€â”€ images/                        â† åŸå§‹å›¾åƒæ–‡ä»¶ç›®å½•
â”œâ”€â”€ annotations/                   â† æ ‡å®šç»“æœï¼ˆJSONï¼‰ä¿å­˜ç›®å½•
â”œâ”€â”€ checkpoints/                   â† æ¨¡å‹æƒé‡æ–‡ä»¶ç›®å½•
â”œâ”€â”€ test_images/                   â† æµ‹è¯•å›¾åƒç›®å½•
â”œâ”€â”€ test_results/                  â† æµ‹è¯•ç»“æœç›®å½•
â”œâ”€â”€ improved_results/              â† ä¼˜åŒ–åçš„ç»“æœç›®å½•
â”œâ”€â”€ read_images/                   â† READMEä½¿ç”¨çš„ç¤ºä¾‹å›¾ç‰‡
â”œâ”€â”€ reference_images/              â† å‚è€ƒå›¾åƒç›®å½•
â”œâ”€â”€ color_segmentation_dataset/    â† é¢œè‰²åˆ†å‰²æ•°æ®é›†
â”œâ”€â”€ requirements.txt               â† é¡¹ç›®ä¾èµ–
â”œâ”€â”€ LICENSE                        â† å¼€æºè®¸å¯è¯
â””â”€â”€ README.md                      â† é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## ğŸ§¾ JSON æ ‡å®šæ•°æ®æ ¼å¼ç¤ºä¾‹ï¼ˆå‹ç¼© RLEï¼‰

```json
{
  "masks": {
    "mask_0": {
      "color": [163, 57, 76],
      "visible": true,
      "editable": false,
      "size": [512, 512],
      "rle": [
        [32000, 12],
        [45678, 9]
      ]
    }
  }
}
```

---

## ğŸ§¾ ä½¿ç”¨è¯´æ˜

### ç•Œé¢

![img_1.png](read_images/img_1.png)
æ”¯æŒæ‰‹åŠ¨æ‹–æ‹½ã€é¼ æ ‡æ»šè½®ç¼©æ”¾å›¾ç‰‡

### æ­¥éª¤

#### æ‰‹å·¥AI åˆ†å‰²

1ã€åŒå‡»å·¦é”®æ·»åŠ å‰æ™¯ç‚¹ï¼›Ctrl+å•å‡»å·¦é”®æ·»åŠ èƒŒæ™¯ç‚¹ï¼ˆå‰æ™¯ç‚¹ä¸ºç»¿è‰²ï¼›èƒŒæ™¯ç‚¹ä¸ºçº¢è‰²ï¼‰
![img_2.png](read_images/img_2.png)

2ã€æ”¯æŒctrl+Xã€ctrl+Yæ’¤é”€å‰æ™¯èƒŒæ™¯ç‚¹

3ã€ç‚¹å‡»æ‰§è¡Œåˆ†å‰²
![img_3.png](read_images/img_3.png)

#### äººå·¥å¾®è°ƒä¿®æ”¹

**å¢åŠ æ©ç **
![img_4.png](read_images/img_4.png)
**æ“¦é™¤æ©ç **
![img_5.png](read_images/img_5.png)
**æ”¯æŒæ’¤é”€**

Ctrl+Z æ’¤é”€ï¼›Ctrl+Y æ¢å¤æ“ä½œ

**æ¸…é™¤æ ‡æ³¨**

ä¸€é”®æ¸…é™¤ç»¿è‰²æ©ç 

**ä¿å­˜æ ‡å®š**

![img_6.png](read_images/img_6.png)
æ”¯æŒä¿®æ”¹ã€åˆ é™¤ã€æ˜¾ç¤ºã€è°ƒæ•´ RGB ä¸»è‰²å‚æ•°


ç‚¹å‡»ä¸»è‰²å—å¼¹å‡ºé¢œè‰²è°ƒèŠ‚çª—å£
![img_7.png](read_images/img_7.png)

**ä¿®æ”¹**
![img_8.png](read_images/img_8.png)
ä¿®æ”¹å®Œæˆåç‚¹å‡»ä¿å­˜æ ‡å®šä¿å­˜ä¿®æ”¹

**ä¿å­˜æ ‡å®š**

ç‚¹å‡»ä¿å­˜æ•°æ®ï¼Œä¼šå°†æ ‡å®šæ•°æ®æŒ‰ç…§æ–‡ä»¶åä¿å­˜ä¸ºå¯¹åº”çš„æ ‡å®š JSON æ–‡ä»¶

#### AI åˆ†å‰²
æ”¯æŒä¸€é”®å®Œæˆåˆ†å‰²æ ‡å®šï¼Œå¯¹æœé¥°è¿›è¡Œè‰²å½©åˆ†ææå–ï¼Œæ¨¡å‹è®­ç»ƒing...

### æ¨¡å‹è®­ç»ƒ
å°†å¯¹åº”çš„jsonæ–‡ä»¶ï¼Œç”Ÿæˆå¯¹åº”çš„æ©ç å›¾åƒ
![img_9.png](read_images/img_9.png)

æå–æ ·æœ¬åº“ä¸»è‰²ä¾›ç»™æ¨¡å‹å‚è€ƒ
![img_10.png](read_images/img_10.png)

ç”±äºæ ·æœ¬å¤ªå°‘ï¼Œç›®å‰ä»…ä»…å›´ç»•å°æ ·æœ¬å’Œæ•°æ®å¢å¼ºå±•å¼€ï¼Œæ•ˆæœä¸ä½³
![img_11.png](read_images/img_11.png)